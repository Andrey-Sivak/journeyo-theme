<?php
$title = $attributes['title'] ?? '';
$items = $attributes['items'] ?? [];

$wrapper_attributes = get_block_wrapper_attributes();
$base_class = 'wp-block-journeyo-team-section';
?>

<section <?php echo $wrapper_attributes; ?>>
    <div class="<?php echo $base_class . '__wrap'; ?>">

        <?php if (!empty($title)) : ?>
            <h2 class="<?php echo $base_class . '__title jn-animate'; ?>">
                <?php echo wp_kses_post($title); ?>
            </h2>
        <?php endif; ?>

        <?php if (!empty($items)) : ?>
            <div class="<?php echo $base_class . '__items' . (count($items) > 3 ? '' : ' jn-items-' . count($items)); ?>">

                <?php foreach ($items as $index => $item) : ?>
                    <article class="<?php echo $base_class . '__item'; ?>">
                        <div class="<?php echo $base_class . '__item-wrap'; ?>">
                            <?php if (!empty($item['photo']) && is_array($item['photo']) && !empty($item['photo']['url'])) : ?>
                                <figure class="<?php echo $base_class . '__item-photo'; ?>">
                                    <svg viewBox="0 0 200 200" fill="none"
                                         class="<?php echo $base_class . '__item-photo-helper'; ?>">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                              d="M199.696 107.854L198.201 107.737C198.399 105.185 198.5 102.604 198.5 100C198.5 97.3957 198.399 94.8153 198.201 92.2625L199.696 92.1463C199.897 94.7378 200 97.3569 200 100C200 102.643 199.897 105.262 199.696 107.854ZM197.258 76.6454L195.799 76.9944C194.588 71.9318 192.986 67.021 191.026 62.2958L192.412 61.7212C194.401 66.5189 196.028 71.505 197.258 76.6454ZM185.277 47.744L183.999 48.529C181.292 44.1212 178.248 39.9426 174.902 36.0292L176.042 35.0545C179.439 39.0272 182.529 43.2692 185.277 47.744ZM164.946 23.9576L163.971 25.0977C160.057 21.7522 155.879 18.7081 151.471 16.0013L152.256 14.7231C156.731 17.4711 160.973 20.5614 164.946 23.9576ZM138.279 7.58805L137.704 8.97364C132.979 7.01417 128.068 5.41198 123.006 4.20072L123.355 2.7419C128.495 3.97174 133.481 5.59853 138.279 7.58805ZM107.854 0.303863L107.737 1.79936C105.185 1.60103 102.604 1.5 100 1.5C97.3957 1.5 94.8153 1.60104 92.2625 1.79936L92.1463 0.303864C94.7378 0.102542 97.3569 0 100 0C102.643 0 105.262 0.102541 107.854 0.303863ZM76.6454 2.74189L76.9944 4.20072C71.9318 5.41198 67.021 7.01417 62.2958 8.97364L61.7212 7.58805C66.5189 5.59853 71.505 3.97174 76.6454 2.74189ZM47.744 14.7231L48.529 16.0013C44.1212 18.7081 39.9426 21.7522 36.0292 25.0977L35.0545 23.9575C39.0272 20.5614 43.2692 17.4711 47.744 14.7231ZM23.9576 35.0545L25.0977 36.0292C21.7522 39.9426 18.7081 44.1212 16.0013 48.529L14.7231 47.744C17.4711 43.2692 20.5614 39.0272 23.9576 35.0545ZM7.58805 61.7212L8.97364 62.2958C7.01417 67.021 5.41198 71.9318 4.20072 76.9944L2.7419 76.6454C3.97174 71.505 5.59853 66.5189 7.58805 61.7212ZM0.303863 92.1463C0.102541 94.7378 0 97.3569 0 100C0 102.643 0.102542 105.262 0.303864 107.854L1.79936 107.737C1.60104 105.185 1.5 102.604 1.5 100C1.5 97.3957 1.60103 94.8153 1.79936 92.2625L0.303863 92.1463ZM2.74189 123.355L4.20072 123.006C5.41198 128.068 7.01417 132.979 8.97364 137.704L7.58805 138.279C5.59853 133.481 3.97174 128.495 2.74189 123.355ZM14.7231 152.256L16.0013 151.471C18.7081 155.879 21.7522 160.057 25.0977 163.971L23.9575 164.946C20.5614 160.973 17.4711 156.731 14.7231 152.256ZM35.0545 176.042L36.0292 174.902C39.9426 178.248 44.1212 181.292 48.529 183.999L47.744 185.277C43.2692 182.529 39.0272 179.439 35.0545 176.042ZM61.7212 192.412L62.2958 191.026C67.021 192.986 71.9318 194.588 76.9944 195.799L76.6454 197.258C71.505 196.028 66.5189 194.401 61.7212 192.412ZM92.1463 199.696L92.2625 198.201C94.8153 198.399 97.3957 198.5 100 198.5C102.604 198.5 105.185 198.399 107.737 198.201L107.854 199.696C105.262 199.897 102.643 200 100 200C97.3569 200 94.7378 199.897 92.1463 199.696ZM123.355 197.258L123.006 195.799C128.068 194.588 132.979 192.986 137.704 191.026L138.279 192.412C133.481 194.401 128.495 196.028 123.355 197.258ZM152.256 185.277C156.731 182.529 160.973 179.439 164.946 176.042L163.971 174.902C160.057 178.248 155.879 181.292 151.471 183.999L152.256 185.277ZM176.042 164.946L174.902 163.971C178.248 160.057 181.292 155.879 183.999 151.471L185.277 152.256C182.529 156.731 179.439 160.973 176.042 164.946ZM192.412 138.279C194.401 133.481 196.028 128.495 197.258 123.355L195.799 123.006C194.588 128.068 192.986 132.979 191.026 137.704L192.412 138.279Z"
                                              fill="#141416"/>
                                    </svg>
                                    <img
                                            src="<?php echo esc_url($item['photo']['url']); ?>"
                                            alt="<?php echo esc_attr($item['photo']['alt'] ?? ''); ?>"
                                            loading="lazy"
                                            width="170"
                                            height="170"
                                    >
                                </figure>
                            <?php endif; ?>

                            <?php if (!empty($item['name'])) : ?>
                                <h3 class="<?php echo $base_class . '__item-name'; ?>">
                                    <?php echo wp_kses_post($item['name']); ?>
                                </h3>
                            <?php endif; ?>
                            <?php if (!empty($item['position'])) : ?>
                                <p class="<?php echo $base_class . '__item-position'; ?>">
                                    <?php echo wp_kses_post($item['position']); ?>
                                </p>
                            <?php endif; ?>
                            <?php if (!empty($item['text'])) : ?>
                                <p class="<?php echo $base_class . '__item-text'; ?>">
                                    <?php echo wp_kses_post($item['text']); ?>
                                </p>
                            <?php endif; ?>
                        </div>
                    </article>
                <?php endforeach; ?>
            </div>
        <?php endif; ?>
    </div>
</section>